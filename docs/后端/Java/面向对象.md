# 面向对象
> 面向对象与面向过程：
> 
> 传统的程序设计通过设计一系列过程来求解问题，Pascal语言语言的设计者Niklaus Wirth所提出的“程序=算法+数据结构”是这种思想的体现，算法是第一位的，数据结构是第二位，先确定如何操作、处理数据，再决定组织数据的结构。这种组织程序方式的典型就是C语言，由一个个函数调用组成。
>
>而OOP（object-oriented programming）调换了这个次序，程序由对象组成，将数据放在第一位，然后再考虑操作数据的算法。这一思想的典型是Java。
>
>对一些规模较小的问题而言，面向过程比较快捷方便，是理想选择。面向对象更适合解决规模较大的问题，这种更加结构化的代码能使程序更易读、更易维护、更快的发现问题。
>
>不过现在许多语言为了其灵活性、表达能力，同时支持多种编程范式，供开发者根据需要灵活使用，例如C++、Javascript，既可以编写面向对象风格的程序，也可以面向过程；
><br>除此之外，编程范式也不止这两种，还有很多其他的编程范式：泛型、函数式(它和面向过程不是一个东西)、事件驱动等。

## 基本概念
### 类与对象

上一章介绍数据类型时只介绍了基本类型，Java数据类型的另一大类就是**引用类型**，就是类，也可以叫封装类型、自定义类型、复合数据类型。

**两者关系**：

- 类是构建对象的模板，对象由类创建，其数据类型上属于某个类。
- 你可以理解为前面基本类型中，类型与变量的关系。对象就是这种类型具体的值、承载具体内容，而类则标识这到底是怎样一种数据，标识其类别。

由类构造对象的过程，成为类的**实例化**，创建出来的对象成为这个类的**实例**。【所以对象和实例说的基本是一回事，只不过语境不同

类，或者说对象，他们内部主要由两部分成员**构成**：属性和方法。

- **属性**用来存储这个对象的一些**状态**、数据，可以是基本类型、也可以是类。
	
	类中声明了这些数据的类型，根据类创建的对象存储具体值。
	
	也叫**字段**field。
	
	其实就是变量(你可以这么理解，但不能反着说，变量更广义一些，比如函数中定义的一些数据，这种才是真正的变量)。
- **方法**就是这个类的**行为**，标识着它可以做些什么，这是一段可执行程序，是个过程。
	
	其实就是函数，如果你学过C语言之类的，你把它理解成函数就好了，这俩是一个东西，Java中没有独立存在的函数，都是依附于类，以方法的形式作为其成员。

**引用：**

不同于上一章基本类型里提到的变量，当变量为对象时，变量所标识的东西，或者说变量所指向的内存位置存储的数据，不是这个对象的数据，而是一个内存地址。这个地址指向对象数据在内存中真正存储的位置。我们将这个内存地址/变量，称为该对象的引用。
	
使用这个对象时使用的其实是这个引用，程序会根据引用找到这个对象的实际位置，通过引用间接访问对象成员。
	
也就是说，对象的值并不是这个对象实际的内容/数据，对象这种特殊变量的值是个引用(你也可以理解成内存地址)。
	
- 对于基本类型的变量，创建一个变量a，用字面量给他初始化一个值后，再创建另一个变量b，将a的值赋值给b，其实际效果是在内存中开辟了两个区域，分别存储a、b两个变量，虽然他们的值一样，但他们各是各的；
	
- 对于引用类型的变量，创建一个对象a，给他一个初始值后，再创建另一个对象b，将a的值赋值给b，其实际效果是内存中开辟了两个区域，分别存储对象a、b的引用，两者依旧各是各的，只是值一样。但由于他们的值是引用类型，实际指向的对象是一个对象，这个过程中，只开辟了一个区域，对象的具体内容/数据始终都是创建a时的那一份。将a初始化赋值给b的过程中，并没有新的实例被创建，只是新创建了一个对象类型的变量。操作变更对象a的属性后，访问对象b的该属性，拿到值是变更后的。
	
即通过赋值语法复制一个引用类型的变量，实际只是复制了对象的引用，对象本身并没有复制，如果希望复制创建一个全新的对象，需要用到一些拷贝对象的途径。这一点后面再介绍。
	
这一段抽象的概念或许有些难以理解，需要你结合后面对象相关的具体语法，以及如何拷贝对象来理解。这里对于初学者难以理解的点在于把握“对象”这一词汇具备双重含义：
	
1. 在内存中存储着的、实际的对象内容、数据。
2. 一种特殊的变量，值为指向一个类实例的引用/地址。但在使用这一词时却不会区分，像在介绍引用这一概念之前，前文提到的对象指的都是第一重含义，即对象的具体内容。所以理解这件事儿的关键就在于结合语境判断导致指的是实际内容，还是引用。
	
对于编译器、或者说Java语法规范而言，使用对象变量(的成员)时使用的是其背后实际对象的值；而在变量赋值、作为函数参数值传递(其实这本质也是赋值)这类将其单纯视为变量，使用其本身值的时候，使用的是引用。

> Java这一点和C++有很大的不同，C++里引用(/指针)就是引用，对象就是对象，对象类型的变量指的永远都是实际对象的数据，其引用/地址则是该类型的指针，想通过其指针/引用访问对象内容要先通过专门的解引用运算符拿到实际指向的内容才行。
> 
> 而Java没把他们拆开，两者是一回事儿，要结合具体的用法来判断。对象类型的变量到底指什么，取决于以何种方式使用它。

**总结：**

类就是类型，和前面基本类型int、char这些一样，只不过是一种自定义的类型。

对象就是类型为这种自定义类的数据。

对象变量，或者说类类型的变量的值不是对象本身，而是指向对象的引用，可以类比前面基本类型的数值、字面量。

对象具有行为和状态。

- 行为通过可调用的方法/函数定义，代表了这类对象的能力，可以做什么、完成什么操作。
	<br>一个类的所有对象实例有着同样的行为，他们的方法都是共用的，都是来自于创建他们的类，而不像状态，每个对象都有一份自己的存着；
- 状态保存着描述对象当前状态的信息。

对象的标识/引用：状态无法完全描述一个对象，状态值完全一样的两个对象不见的相同，这就像两个int类型的变量a和b，尽管他们的值都是3例如，但他们各是各的，只是值一样。每个对象都有一个唯一标识，这个标识就是对象的引用，它们指向不同的对象。

### 预定义类
类又可以分成两种，一种是开发人员自行根据需要编写的**自定义类**，一种是由Java预先提供，成为了语言标准、语法的一部分，为**预定义类**，这些预定义类通常比基本类型复杂，需要用类实现，用于解决某类普遍问题，例如处理时间的Date和LocalDate、用于数学计算的Math、字符串String、数组Array、枚举Enum、处理文件读写的File类、用于网络编程的Socket类等等。

预定义类在实现上还可以再分成两种，

- 一种在实现上和你自己定义的类没有任何区别，完全用Java语法实现，你能看得到他的实现、构成，就是Java替你封装好的一些工具类，方便你直接使用。例如Java的各种集合类，他封装了一系列典型的数据结构和算法在里面，方便你直接基于此来组织数据；
- 还有一部分预定义类，虽然他在使用上，和普通的类没有任何区别，类语法规定怎样使用，他就怎样使用。但是你看不到他的内部构成，或者说它底层根本就不是通过Java实现的，它只是以类的形式向你提供一些Java语言的某种能力，例如处理网络请求、文件读写。这种也不可能通过Java语言本身实现，这种类是直接被编译器、JVM原生支持，以更底层的方式实现的，实现级别不在Java。

## 基本语法
前面一节是从概念上，比较抽象地介绍类，这一节介绍编写、使用一个类所需的最基本语法。

### **类的定义**
类的最简单定义形式如下

```Java
class ClassName{
	field1
	field2
	...
	constructor1
	constructor2
	...
	method1
	method2
	...
}
```
这里面ClassName的位置是类的名字，就像int、float一样，类名的命名规则遵照前面提到的标识符命名方法。除此之外Java规定所有的类名第一个字符必须为大写字母开头。类名使用驼峰命名法（这一点不是语法规范的强制要求，但几乎没有例外）。

类名前面的`class`是关键字，标识这里是一个类的定义/声明。

field处就是类的字段/属性/状态，定义类属性的方式，和前面提到的定义变量的语句一样。

constructor的位置是类的构造器/构造函数/构造方法，他用于创建一个类的对象，指示遵照何种规则实例化、如何创建该类型对象。有关构造函数的部分后文将详细展开。

method的位置就是类的方法/函数。

这三者的顺序是任意的，先写谁、混着写，都无所谓，语法没有做任何要求，只是一般会这样写，比较符合逻辑、易读。

### **类的实例化/对象的创建**
这一过程你可以类比创建某一基本类型的变量。

```Java
ClassName classNameObj = new ClassName();
```
这和基本类型的语法基本是一致的，先声明变量类型，然后是对象名称，命名规则遵循前面提到的标识符命名，不同的是初始化时不能像基本类型那样直接给个字面量，要以构造函数的形式创建一个对象。

`new`关键字+`类名()`的形式表示创建一个该类型的对象，通过这种方式调用构造函数，在调用处返回创造出的对象引用。最终用过赋值语句将对象引用赋值给对象。

同样的，像前面基本类型提到的诸多关于变量的操作这里都是同理：

```Java
//只声明不初始化，声明创建多个对象
ClassName classNameObj1, classNameObj2；
//声明之后再初始化、赋值
classNameObj1 = new className();
//赋值，上一种是创建一个对象赋值，类比基本类型的字面量赋值；
//也可以拿对象给另一个对象赋值，赋值后它们的引用相同，指向同一个对象
classNameObj2 = classNameObj1；
```
这里展示的是最简化情形，让你先知道对象是怎么被创建出来的。实际上对象的创建不止这一种方法，通过new关键字创建对象也有着更复杂的情形，这些会在介绍完方法后，在构造器一节集中介绍。

### **对象(成员)的使用**
通过点操作符`.`访问调用对象的成员。

```Java
//获取、使用对象属性的几个例子
classNameObj.field1;
int someName = classNameObj.field1;
//修改对象属性的几个例子
classNameObj.field1 = 2 * 3 - 1;
classNameObj1.field1 = classNameObj2.field1;
//调用对象方法
classNameObj.method1();
```
### 方法
>有些语言叫函数，这里不作区分，将它们视为一回事儿。

>函数这个概念最早你应当是在数学中接触的：接收几个自变量，按照一定的规则，对变量运算，最后得到函数的值。数学中的函数强调的是一个数值集合于另一个集合的一种对应关系，从函数本身而言，是一种计算规则。
>
>编程中的函数也有这层意思，并且形式也和数学中的函数十分相似。但除此求值之外，编程中的函数还强调过程，函数除了最后返回一个值，函数的调用执行中，除了计算求出返回值，还可以存在很多不是求值、和计算无关的过程，它们只是单纯的执行某个操作，例如打开一个文件、发送一个网络请求、调用另一个函数、创建变量等等。
>
>编程中的函数还描述一段可执行过程，会产生一些副作用。

接收若干个参数、执行一段过程、返回一个结果值。

```java
TypeName fucntionName(Param1Type param1, Param2Type param2, ...){
	<do something>
	return <value>;
}
```
functionName就是函数的名字，标识这个函数，命名遵循前面的标识符命名。

后面圆括号里的是函数的参数列表，有若干个，表示这个函数执行需要的上下文/数据。参数需要在前面声明类型，多个参数用逗号分隔。

花括号里是函数体，定义函数的执行过程，可以是任意语句：流程控制、(局部)变量创建、其他函数调用等等。

关键字`return`标志着函数执行的结束，函数只要执行到return语句，不管后面还有什么内容，都会终止，返回结果。返回语句中value处可以是个值，也可以是个能求到值的表达式，总之最终得能得到一个用来返回的值。

一开头的TypeName就是这个函数的类型，确切的说是函数返回值类型，即函数最终会返回个什么类型的值。

函数可以什么都不返回，但Java是强类型语言，需要对这种返回类型进行标识，使用关键字`void`，这是一个特殊的类型，表示函数什么也不返回，只是执行一个过程。将void放在TypeName处。
<br>显然void类型函数，返回语句里就没有值，直接为`return;`。
<br>函数可以没有return语句，从头执行到尾自动就结束了，等效于`return;`什么都不返回。
<br>void函数既然没有返回值，这种函数的调用，就没办法用于需要值的位置、求值表达式中，因为他都没有值，这种写法无法通过类型检查，会导致编译器报错。